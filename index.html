<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì€ì‚¬ì ê²€ í…ŒìŠ¤íŠ¸</title>
    <meta name="description" content="í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ì€ì‚¬ë¥¼ ë°œê²¬í•˜ëŠ” í…ŒìŠ¤íŠ¸">
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const SpiritualGiftTest = () => {
          const [currentStep, setCurrentStep] = useState('intro');
          const [scores, setScores] = useState({
            affinity: Array(10).fill(0),
            ability: Array(10).fill(0),
            opportunity: Array(10).fill(0)
          });

          const giftTypes = [
            { id: 1, name: 'ê¸íœ¼', desc: 'ì–´ë ¤ì›€ì„ ê²ªëŠ” ì‚¬ëŒë“¤ì—ê²Œ ê¹Šì´ ê³µê°í•˜ê³  ìœ„ë¡œí•˜ëŠ” ëŠ¥ë ¥' },
            { id: 2, name: 'ê°€ë¥´ì¹¨', desc: 'ì„±ê²½ì  ì§„ë¦¬ë¥¼ ëª…í™•í•˜ê²Œ ì„¤ëª…í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ëŒì„ êµìœ¡í•˜ëŠ” ëŠ¥ë ¥' },
            { id: 3, name: 'í–‰ì •', desc: 'ì¡°ì§ì´ë‚˜ í–‰ì‚¬ë¥¼ ê³„íší•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ëŠ¥ë ¥' },
            { id: 4, name: 'ëª©ì–‘', desc: 'ì‚¬ëŒë“¤ì„ ëŒë³´ê³ , ê²©ë ¤í•˜ë©°, ì˜ì ìœ¼ë¡œ ì„±ì¥í•˜ë„ë¡ ë•ëŠ” ëŠ¥ë ¥' },
            { id: 5, name: 'ì°½ì¡°ì ', desc: 'ì˜ˆìˆ (ìŒì•…, ë¯¸ìˆ  ë“±)ì„ í†µí•´ í•˜ë‚˜ë‹˜ì„ ì˜ˆë°°í•˜ê³  í‘œí˜„í•˜ëŠ” ëŠ¥ë ¥' },
            { id: 6, name: 'êµ¬ì œ', desc: 'ë¬¼ì§ˆì  ìì›ì„ ê¸°ì˜ê²Œ ë‚˜ëˆ„ì–´ ë‹¤ë¥¸ ì‚¬ëŒì„ ë•ëŠ” ëŠ¥ë ¥' },
            { id: 7, name: 'ì„ êµ', desc: 'ë‹¤ë¥¸ ë¬¸í™”ê¶Œì´ë‚˜ í™˜ê²½ì— ì ì‘í•˜ì—¬ ë³µìŒì„ ì „í•˜ëŠ” ëŠ¥ë ¥' },
            { id: 8, name: 'ì „ë„', desc: 'ë¹„ì‹ ìì—ê²Œ ë³µìŒì„ ëª…í™•í•˜ê²Œ ì œì‹œí•˜ì—¬ ê²°ì‹ ì„ ë•ëŠ” ëŠ¥ë ¥' },
            { id: 9, name: 'ë¶„ë³„', desc: 'ì§„ë¦¬ì™€ ê±°ì§“, ì„ ê³¼ ì•…ì„ ì˜ì ìœ¼ë¡œ ë¶„ë³„í•˜ëŠ” ëŠ¥ë ¥' },
            { id: 10, name: 'ì§€í˜œ', desc: 'ë³µì¡í•œ ë¬¸ì œì— ëŒ€í•œ ì‹¤ì§ˆì ì´ê³  íš¨ê³¼ì ì¸ í•´ê²°ì±…ì„ ì œì‹œí•˜ëŠ” ëŠ¥ë ¥' }
          ];

          const questions = {
            affinity: [
              'ì–´ë ¤ì›€ì„ ê²ªëŠ” ì‚¬ëŒë“¤ì˜ ì´ì•¼ê¸°ë¥¼ ë“£ê³ , ê·¸ë“¤ì˜ ì•„í””ì— ê¹Šì´ ê³µê°í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.',
              'ì„±ê²½ ë§ì”€ì„ ê¹Šì´ ì—°êµ¬í•˜ê³ , ê·¸ ì§„ë¦¬ë¥¼ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ì‰½ê²Œ ì„¤ëª…í•´ ì£¼ëŠ” ë° í¥ë¯¸ê°€ ìˆë‹¤.',
              'êµíšŒ í–‰ì‚¬ë¥¼ ê³„íší•˜ê³ , ê° ë¶€ì„œì˜ ì—­í• ì„ ì¡°ìœ¨í•˜ëŠ” ë“± ì „ì²´ ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ” ì¼ì„ ì¦ê¸´ë‹¤.',
              'ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ìì‹ ì˜ ì ì¬ë ¥ì„ ë°œê²¬í•˜ê³  ì„±ì¥í•˜ë„ë¡ ë•ëŠ” ë° í° ê¸°ì¨ì„ ëŠë‚€ë‹¤.',
              'ì˜ˆìˆ (ìŒì•…, ë¯¸ìˆ , ê¸€ì“°ê¸° ë“±)ì„ í†µí•´ í•˜ë‚˜ë‹˜ì„ í‘œí˜„í•˜ê±°ë‚˜ ì˜ˆë°° ë¶„ìœ„ê¸°ë¥¼ ì¡°ì„±í•˜ëŠ” ë° ë§ˆìŒì´ ëŒë¦°ë‹¤.',
              'ëˆ„êµ°ê°€ì˜ í•„ìš”ë¥¼ ë°œê²¬í•˜ë©´, ë¬¼ì§ˆì ì´ë“  ì‹¤ì§ˆì ì¸ ë„ì›€ì´ë“  ë§ì„¤ì´ì§€ ì•Šê³  ê¸°êº¼ì´ ë•ëŠ”ë‹¤.',
              'ì „í˜€ ìƒˆë¡œìš´ í™˜ê²½ì´ë‚˜ ë¬¸í™”ê¶Œì—ì„œ ë³µìŒì„ ì „í•˜ê³  êµíšŒë¥¼ ì„¸ìš°ëŠ” ìƒìƒì„ í•˜ê³¤ í•œë‹¤.',
              'ë¹„ì‹ ì ì¹œêµ¬ë“¤ì—ê²Œ ê¸°ë…êµì— ëŒ€í•´ ìì—°ìŠ¤ëŸ½ê²Œ ì´ì•¼ê¸°í•  ê¸°íšŒë¥¼ í•­ìƒ ì°¾ëŠ”ë‹¤.',
              'ì˜ì ìœ¼ë¡œ í˜¼ë€ìŠ¤ëŸ¬ì›Œí•˜ëŠ” ì‚¬ëŒë“¤ì„ ìœ„í•´ ì§„ë¦¬ì™€ ê±°ì§“ì„ ë¶„ë³„í•˜ê³  ì˜¬ë°”ë¥¸ ê¸¸ì„ ì œì‹œí•´ ì£¼ê³  ì‹¶ë‹¤.',
              'êµíšŒì˜ ì¬ì •ì„ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬í•˜ê³ , ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ê´€ì‹¬ì´ ë§ë‹¤.'
            ],
            ability: [
              'ë‹¹ì‹ ì˜ ìœ„ë¡œì™€ ê²©ë ¤ë¥¼ í†µí•´ ë‚™ì‹¬í–ˆë˜ ì‚¬ëŒë“¤ì´ ë‹¤ì‹œ ì¼ì–´ì„  ê²½í—˜ì´ ìˆë‹¤.',
              'ë‹¹ì‹ ì˜ ê°€ë¥´ì¹¨ì„ ë“¤ì€ ì‚¬ëŒë“¤ì´ ì„±ê²½ì  ì§„ë¦¬ë¥¼ ë” ì˜ ì´í•´í•˜ê³  ì‚¶ì— ì ìš©í•˜ëŠ” ê²ƒì„ ë³´ì•˜ë‹¤.',
              'ë‹¹ì‹ ì´ ê³„íší•˜ê³  ì¡°ì§í•œ í–‰ì‚¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì˜ ë§ˆë¬´ë¦¬ë˜ì–´ ê¸ì •ì ì¸ í‰ê°€ë¥¼ ë°›ì€ ì ì´ ìˆë‹¤.',
              'ë‹¹ì‹ ì˜ ì¡°ì–¸ê³¼ ë¦¬ë”ì‹­ì„ í†µí•´ ê³µë™ì²´ì˜ ëª©í‘œê°€ ì„±ê³µì ìœ¼ë¡œ ë‹¬ì„±ëœ ê²½í—˜ì´ ìˆë‹¤.',
              'ë‹¹ì‹ ì´ ë§Œë“  ì‘í’ˆì´ë‚˜ ìŒì•…ì´ ì˜ˆë°° ê³µë™ì²´ì— ê¹Šì€ ì˜ì  ìš¸ë¦¼ì„ ì£¼ì—ˆë‹¤.',
              'ë‹¹ì‹ ì´ ë² í‘¼ ë¬¼ì§ˆì  ë„ì›€ì´ë‚˜ ë´‰ì‚¬ë¥¼ í†µí•´ ìƒëŒ€ë°©ì˜ ì‹¤ì œì ì¸ ë¬¸ì œê°€ í•´ê²°ëœ ì ì´ ìˆë‹¤.',
              'ë‚¯ì„  ì‚¬ëŒë“¤ê³¼ ê¸ˆë°© ì¹œí•´ì§€ê³ , ê·¸ë“¤ì´ í¸ì•ˆí•¨ì„ ëŠë¼ë„ë¡ ë•ëŠ” ëŠ¥ë ¥ì´ ìˆë‹¤.',
              'ë‹¹ì‹ ì˜ ê°„ì¦ì´ë‚˜ ë³µìŒ ì œì‹œë¥¼ í†µí•´ ë¹„ì‹ ìê°€ ì˜ˆìˆ˜ ê·¸ë¦¬ìŠ¤ë„ë¥¼ ì˜ì ‘í•œ ê²½í—˜ì´ ìˆë‹¤.',
              'ì˜ì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ, ë‹¹ì‹ ì˜ í†µì°°ë ¥ìœ¼ë¡œ ìƒí™©ì„ ëª…í™•í•˜ê²Œ íŒŒì•…í•˜ê³  ë¶„ë³„í•´ëƒˆë‹¤.',
              'ë³µì¡í•œ ë¬¸ì œë¥¼ ê°„ë‹¨í•˜ê³  íš¨ê³¼ì ì¸ í•´ê²°ì±…ìœ¼ë¡œ ì •ë¦¬í•˜ì—¬ ì œì‹œí•˜ëŠ” ë° ëŠ¥ìˆ™í•˜ë‹¤.'
            ],
            opportunity: [
              'ë‹¹ì‹ ì´ ì†í•œ ì†Œê·¸ë£¹ì— ë§ˆìŒì˜ ì–´ë ¤ì›€ì„ ê²ªëŠ” ì‚¬ëŒì´ ìˆì–´ ìœ„ë¡œê°€ í•„ìš”í•˜ë‹¤.',
              'êµíšŒì— ìƒˆë¡­ê²Œ ë“±ë¡í•œ ì„±ë„ë“¤ì„ ì–‘ìœ¡í•˜ê³  ê°€ë¥´ì³ì¤„ ì‚¬ëŒì´ í•„ìš”í•˜ë‹¤.',
              'ë‹¤ìŒ ì„¸ëŒ€ë¥¼ ìœ„í•œ í–‰ì‚¬ë¥¼ ê¸°íší•˜ê³  ìš´ì˜í•  íŒ€ì›ì´ í•„ìš”í•˜ë‹¤.',
              'ì†Œê·¸ë£¹ ë¦¬ë”ë‚˜ ë´‰ì‚¬íŒ€ íŒ€ì¥ì²˜ëŸ¼, ì‚¬ëŒë“¤ì„ ì´ëŒì–´ ì¤„ ë¦¬ë”ê°€ í•„ìš”í•˜ë‹¤.',
              'êµíšŒ ì˜ˆë°°ë‚˜ ì°¬ì–‘íŒ€ì—ì„œ ì°½ì¡°ì ì¸ ì¬ëŠ¥ì„ ê°€ì§„ ì‚¬ëŒì„ ì°¾ê³  ìˆë‹¤.',
              'êµíšŒ ì£¼ë³€ì— ì–´ë ¤ìš´ ì´ì›ƒì„ ë•ëŠ” êµ¬ì œ ì‚¬ì—­ì„ ì‹œì‘í•˜ë ¤ í•œë‹¤.',
              'í•´ì™¸ ì„ êµë‚˜ ë¯¸ì „ë„ ì¢…ì¡± ì‚¬ì—­ì— ë™ì°¸í•  ì‚¬ëŒì„ ì°¾ê³  ìˆë‹¤.',
              'êµíšŒì— ì•„ì§ ë¯¿ì§€ ì•ŠëŠ” ê°€ì¡±ì´ë‚˜ ì¹œêµ¬ë¥¼ ë‘” ì„±ë„ë“¤ì´ ë§ë‹¤.',
              'ì´ë‹¨ì´ë‚˜ ì˜ëª»ëœ ê°€ë¥´ì¹¨ì— ëŒ€í•œ ë¶„ë³„ë ¥ì„ ê¸¸ëŸ¬ì¤„ êµìœ¡ í”„ë¡œê·¸ë¨ì´ í•„ìš”í•˜ë‹¤.',
              'êµíšŒ í–‰ì •ì´ë‚˜ ì¬ì • ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•  ë´‰ì‚¬ìê°€ í•„ìš”í•˜ë‹¤.'
            ]
          };

          const handleScore = (category, index, score) => {
            setScores(prev => ({
              ...prev,
              [category]: prev[category].map((s, i) => i === index ? score : s)
            }));
          };

          const calculateTopGifts = (categoryScores) => {
            return categoryScores
              .map((score, index) => ({ giftId: index + 1, score }))
              .sort((a, b) => b.score - a.score)
              .slice(0, 3);
          };

          const getResults = () => {
            const topAffinity = calculateTopGifts(scores.affinity);
            const topAbility = calculateTopGifts(scores.ability);
            const topOpportunity = calculateTopGifts(scores.opportunity);

            // ê° ì€ì‚¬ë³„ë¡œ ì„¸ ì˜ì—­ì˜ ì ìˆ˜ë¥¼ ê³„ì‚°
            const giftAnalysis = scores.affinity.map((_, i) => ({
              giftId: i + 1,
              name: giftTypes[i].name,
              affinity: scores.affinity[i],
              ability: scores.ability[i],
              opportunity: scores.opportunity[i],
              average: (scores.affinity[i] + scores.ability[i] + scores.opportunity[i]) / 3,
              total: scores.affinity[i] + scores.ability[i] + scores.opportunity[i],
              // ì„¸ ì˜ì—­ì˜ ì ìˆ˜ í¸ì°¨ ê³„ì‚° (ì¼ì¹˜ë„)
              consistency: Math.max(scores.affinity[i], scores.ability[i], scores.opportunity[i]) - 
                          Math.min(scores.affinity[i], scores.ability[i], scores.opportunity[i])
            }));

            // ìƒìœ„ 3ê°œì— ëª¨ë‘ í¬í•¨ë˜ëŠ” ì€ì‚¬ ì°¾ê¸°
            const topGiftIds = {
              affinity: topAffinity.map(g => g.giftId),
              ability: topAbility.map(g => g.giftId),
              opportunity: topOpportunity.map(g => g.giftId)
            };

            // ì„¸ ì˜ì—­ ëª¨ë‘ì—ì„œ ìƒìœ„ 3ê°œì— í¬í•¨ë˜ëŠ” ì€ì‚¬
            const matchingGifts = giftAnalysis
              .filter(gift => 
                topGiftIds.affinity.includes(gift.giftId) &&
                topGiftIds.ability.includes(gift.giftId) &&
                topGiftIds.opportunity.includes(gift.giftId)
              )
              .sort((a, b) => {
                // 1ìˆœìœ„: í‰ê·  ì ìˆ˜ê°€ ë†’ì„ìˆ˜ë¡
                // 2ìˆœìœ„: ì¼ì¹˜ë„ê°€ ë†’ì„ìˆ˜ë¡ (í¸ì°¨ê°€ ì‘ì„ìˆ˜ë¡)
                if (Math.abs(b.average - a.average) > 0.3) {
                  return b.average - a.average;
                }
                return a.consistency - b.consistency;
              });

            // ì¼ì¹˜í•˜ì§€ ì•Šë”ë¼ë„ ì ìˆ˜ê°€ ë†’ê³  ì¼ì¹˜ë„ê°€ ì¢‹ì€ ì€ì‚¬
            const strongGifts = giftAnalysis
              .filter(gift => 
                gift.average >= 3.5 && // í‰ê·  3.5ì  ì´ìƒ
                gift.consistency <= 1.5 && // í¸ì°¨ 1.5ì  ì´í•˜
                !matchingGifts.find(m => m.giftId === gift.giftId) // ì´ë¯¸ ë§¤ì¹­ëœ ê²ƒ ì œì™¸
              )
              .sort((a, b) => b.average - a.average);

            return {
              topAffinity,
              topAbility,
              topOpportunity,
              matchingGifts,
              strongGifts,
              allGifts: giftAnalysis,
              totalScores: scores.affinity.map((_, i) => ({
                gift: giftTypes[i].name,
                affinity: scores.affinity[i],
                ability: scores.ability[i],
                opportunity: scores.opportunity[i],
                total: scores.affinity[i] + scores.ability[i] + scores.opportunity[i]
              }))
            };
          };

          const RadarChart = ({ data }) => {
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            useEffect(() => {
              if (chartRef.current) {
                const ctx = chartRef.current.getContext('2d');
                
                if (chartInstance.current) {
                  chartInstance.current.destroy();
                }

                chartInstance.current = new Chart(ctx, {
                  type: 'radar',
                  data: {
                    labels: data.map(d => d.gift),
                    datasets: [
                      {
                        label: 'ê´€ì‹¬',
                        data: data.map(d => d.affinity),
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgb(59, 130, 246)',
                        borderWidth: 2
                      },
                      {
                        label: 'ëŠ¥ë ¥',
                        data: data.map(d => d.ability),
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderColor: 'rgb(139, 92, 246)',
                        borderWidth: 2
                      },
                      {
                        label: 'ê¸°íšŒ',
                        data: data.map(d => d.opportunity),
                        backgroundColor: 'rgba(245, 158, 11, 0.2)',
                        borderColor: 'rgb(245, 158, 11)',
                        borderWidth: 2
                      }
                    ]
                  },
                  options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                      r: {
                        beginAtZero: true,
                        max: 5,
                        ticks: {
                          stepSize: 1
                        }
                      }
                    },
                    plugins: {
                      legend: {
                        position: 'top',
                      }
                    }
                  }
                });
              }

              return () => {
                if (chartInstance.current) {
                  chartInstance.current.destroy();
                }
              };
            }, [data]);

            return <canvas ref={chartRef} />;
          };

          const renderIntro = () => (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8">
              <div className="max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-10">
                <h1 className="text-3xl md:text-4xl font-bold text-center text-indigo-900 mb-6">
                  ì€ì‚¬ì ê²€ í…ŒìŠ¤íŠ¸
                </h1>
                <div className="space-y-4 text-gray-700 leading-relaxed">
                  <p className="text-lg">
                    ì´ í…ŒìŠ¤íŠ¸ëŠ” ì •ë‹µì„ ì°¾ëŠ” ì‹œí—˜ì´ ì•„ë‹™ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë‚´ë©´ì— ìˆëŠ” í•˜ë‚˜ë‹˜ì´ ì£¼ì‹  ì€ì‚¬ë¥¼ ë°œê²¬í•˜ê³ , 
                    ì´ë¥¼ í†µí•´ ë‹¹ì‹ ê³¼ ê³µë™ì²´ê°€ í•¨ê»˜ ì„±ì¥í•˜ëŠ” ê¸°íšŒë¥¼ ì°¾ê¸° ìœ„í•œ ë„êµ¬ì…ë‹ˆë‹¤.
                  </p>
                  <div className="bg-indigo-50 p-6 rounded-lg">
                    <h3 className="font-bold text-xl mb-3 text-indigo-900">í‰ê°€ ê¸°ì¤€</h3>
                    <ul className="space-y-2">
                      <li><strong>5</strong> = í•­ìƒ, í™•ì‹¤íˆ ê·¸ë ‡ë‹¤</li>
                      <li><strong>4</strong> = ëŒ€ë¶€ë¶„, ëŒ€ì²´ë¡œ ê·¸ë ‡ë‹¤</li>
                      <li><strong>3</strong> = ë³´í†µ ê·¸ë ‡ë‹¤</li>
                      <li><strong>2</strong> = ë•Œë•Œë¡œ, ê°€ë” ê·¸ë ‡ë‹¤</li>
                      <li><strong>1</strong> = ì „í˜€, ì ˆëŒ€ë¡œ ê·¸ë ‡ì§€ ì•Šë‹¤</li>
                    </ul>
                  </div>
                  <div className="bg-blue-50 p-6 rounded-lg">
                    <h3 className="font-bold text-xl mb-3 text-blue-900">ì„¸ ê°€ì§€ ì˜ì—­</h3>
                    <ul className="space-y-2">
                      <li><strong>ê´€ì‹¬(Affinity)</strong> - ë‹¹ì‹ ì˜ ë§ˆìŒì€ ì–´ë””ì— ëŒë¦¬ë‚˜ìš”?</li>
                      <li><strong>ëŠ¥ë ¥(Ability)</strong> - ë‹¹ì‹ ì˜ ì¬ëŠ¥ì€ ë¬´ì—‡ì¸ê°€ìš”?</li>
                      <li><strong>ê¸°íšŒ(Opportunity)</strong> - ê³µë™ì²´ì˜ í•„ìš”ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</li>
                    </ul>
                  </div>
                </div>
                <button 
                  onClick={() => setCurrentStep('affinity')}
                  className="w-full mt-8 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-lg text-lg transition duration-200"
                >
                  í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°
                </button>
              </div>
            </div>
          );

          const renderQuestions = (category, title, description) => {
            const categoryScores = scores[category];
            const progress = (categoryScores.filter(s => s > 0).length / 10) * 100;

            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8">
                <div className="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-10">
                  <div className="mb-8">
                    <h2 className="text-2xl md:text-3xl font-bold text-indigo-900 mb-2">{title}</h2>
                    <p className="text-gray-600">{description}</p>
                    <div className="mt-4 bg-gray-200 rounded-full h-3">
                      <div 
                        className="bg-indigo-600 h-3 rounded-full transition-all duration-300"
                        style={{ width: `${progress}%` }}
                      ></div>
                    </div>
                    <p className="text-sm text-gray-500 mt-2">{Math.round(progress)}% ì™„ë£Œ</p>
                  </div>

                  <div className="space-y-6">
                    {questions[category].map((question, index) => (
                      <div key={index} className="border border-gray-200 rounded-lg p-4 md:p-6 hover:shadow-md transition">
                        <p className="font-medium text-gray-800 mb-4">
                          {index + 1}. {question}
                        </p>
                        <div className="flex flex-wrap gap-2 justify-center md:justify-start">
                          {[1, 2, 3, 4, 5].map(score => (
                            <button
                              key={score}
                              onClick={() => handleScore(category, index, score)}
                              className={`w-12 h-12 rounded-full font-bold transition ${
                                categoryScores[index] === score
                                  ? 'bg-indigo-600 text-white scale-110'
                                  : 'bg-gray-200 hover:bg-gray-300 text-gray-700'
                              }`}
                            >
                              {score}
                            </button>
                          ))}
                        </div>
                      </div>
                    ))}
                  </div>

                  <div className="flex flex-col md:flex-row gap-4 mt-8">
                    {category !== 'affinity' && (
                      <button
                        onClick={() => {
                          if (category === 'ability') setCurrentStep('affinity');
                          else if (category === 'opportunity') setCurrentStep('ability');
                        }}
                        className="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-4 px-6 rounded-lg transition"
                      >
                        ì´ì „
                      </button>
                    )}
                    <button
                      onClick={() => {
                        if (category === 'affinity') setCurrentStep('ability');
                        else if (category === 'ability') setCurrentStep('opportunity');
                        else setCurrentStep('result');
                      }}
                      disabled={categoryScores.some(s => s === 0)}
                      className={`flex-1 font-bold py-4 px-6 rounded-lg transition ${
                        categoryScores.some(s => s === 0)
                          ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                          : 'bg-indigo-600 hover:bg-indigo-700 text-white'
                      }`}
                    >
                      {category === 'opportunity' ? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ'}
                    </button>
                  </div>
                </div>
              </div>
            );
          };

          const renderResults = () => {
            const results = getResults();

            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8">
                <div className="max-w-6xl mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-10">
                  <h2 className="text-3xl md:text-4xl font-bold text-center text-indigo-900 mb-8">
                    í…ŒìŠ¤íŠ¸ ê²°ê³¼
                  </h2>

                  {results.matchingGifts.length > 0 && (
                    <div className="mb-8 p-6 bg-green-50 border-2 border-green-500 rounded-xl">
                      <h3 className="text-2xl font-bold text-green-800 mb-4">
                        ğŸ¯ ë‹¹ì‹ ì˜ í•µì‹¬ ì€ì‚¬ (ì„¸ ì˜ì—­ ëª¨ë‘ ìƒìœ„ê¶Œ)
                      </h3>
                      <div className="space-y-3">
                        {results.matchingGifts.map(gift => (
                          <div key={gift.giftId} className="bg-white p-4 rounded-lg">
                            <div className="flex justify-between items-start mb-2">
                              <h4 className="font-bold text-xl text-green-700">{gift.name}</h4>
                              <div className="text-sm text-gray-600">
                                í‰ê· : <span className="font-bold text-green-700">{gift.average.toFixed(1)}ì </span>
                              </div>
                            </div>
                            <p className="text-gray-600 mb-2">{giftTypes[gift.giftId - 1].desc}</p>
                            <div className="flex gap-4 text-sm">
                              <span>ê´€ì‹¬: {gift.affinity}ì </span>
                              <span>ëŠ¥ë ¥: {gift.ability}ì </span>
                              <span>ê¸°íšŒ: {gift.opportunity}ì </span>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  {results.strongGifts.length > 0 && (
                    <div className="mb-8 p-6 bg-blue-50 border-2 border-blue-400 rounded-xl">
                      <h3 className="text-2xl font-bold text-blue-800 mb-4">
                        ğŸ’ª ê°•í•œ ì€ì‚¬ (ë†’ì€ ì ìˆ˜ + ì¢‹ì€ ì¼ì¹˜ë„)
                      </h3>
                      <p className="text-sm text-blue-700 mb-4">
                        ì„¸ ì˜ì—­ ëª¨ë‘ ìƒìœ„ê¶Œì€ ì•„ë‹ˆì§€ë§Œ, ì ìˆ˜ê°€ ë†’ê³  ì¼ì¹˜ë„ê°€ ì¢‹ì€ ì€ì‚¬ì…ë‹ˆë‹¤.
                      </p>
                      <div className="space-y-3">
                        {results.strongGifts.map(gift => (
                          <div key={gift.giftId} className="bg-white p-4 rounded-lg">
                            <div className="flex justify-between items-start mb-2">
                              <h4 className="font-bold text-lg text-blue-700">{gift.name}</h4>
                              <div className="text-sm text-gray-600">
                                í‰ê· : <span className="font-bold text-blue-700">{gift.average.toFixed(1)}ì </span>
                              </div>
                            </div>
                            <p className="text-gray-600 mb-2">{giftTypes[gift.giftId - 1].desc}</p>
                            <div className="flex gap-4 text-sm">
                              <span>ê´€ì‹¬: {gift.affinity}ì </span>
                              <span>ëŠ¥ë ¥: {gift.ability}ì </span>
                              <span>ê¸°íšŒ: {gift.opportunity}ì </span>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  <div className="grid md:grid-cols-3 gap-6 mb-8">
                    <div className="bg-blue-50 p-6 rounded-xl">
                      <h3 className="text-xl font-bold text-blue-900 mb-4">ê´€ì‹¬ (Affinity)</h3>
                      <div className="space-y-2">
                        {results.topAffinity.map((item, index) => (
                          <div key={index} className="bg-white p-3 rounded-lg">
                            <div className="font-bold">{index + 1}. {giftTypes[item.giftId - 1].name}</div>
                            <div className="text-sm text-gray-600">ì ìˆ˜: {item.score}</div>
                          </div>
                        ))}
                      </div>
                    </div>

                    <div className="bg-purple-50 p-6 rounded-xl">
                      <h3 className="text-xl font-bold text-purple-900 mb-4">ëŠ¥ë ¥ (Ability)</h3>
                      <div className="space-y-2">
                        {results.topAbility.map((item, index) => (
                          <div key={index} className="bg-white p-3 rounded-lg">
                            <div className="font-bold">{index + 1}. {giftTypes[item.giftId - 1].name}</div>
                            <div className="text-sm text-gray-600">ì ìˆ˜: {item.score}</div>
                          </div>
                        ))}
                      </div>
                    </div>

                    <div className="bg-orange-50 p-6 rounded-xl">
                      <h3 className="text-xl font-bold text-orange-900 mb-4">ê¸°íšŒ (Opportunity)</h3>
                      <div className="space-y-2">
                        {results.topOpportunity.map((item, index) => (
                          <div key={index} className="bg-white p-3 rounded-lg">
                            <div className="font-bold">{index + 1}. {giftTypes[item.giftId - 1].name}</div>
                            <div className="text-sm text-gray-600">ì ìˆ˜: {item.score}</div>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>

                  {/* ë ˆì´ë” ì°¨íŠ¸ */}
                  <div className="mb-8 bg-white p-6 rounded-xl shadow">
                    <h3 className="text-2xl font-bold text-gray-800 mb-4 text-center">ì „ì²´ ì€ì‚¬ í”„ë¡œí•„</h3>
                    <div className="max-w-2xl mx-auto">
                      <RadarChart data={results.totalScores} />
                    </div>
                  </div>

                  <div className="bg-indigo-50 p-6 rounded-xl mb-8">
                    <h3 className="text-2xl font-bold text-indigo-900 mb-4">ê²°ê³¼ í•´ì„</h3>
                    <div className="space-y-4 text-gray-700">
                      <div className="bg-white p-4 rounded-lg">
                        <h4 className="font-bold text-lg text-indigo-800 mb-2">ğŸ¯ í•µì‹¬ ì€ì‚¬ë€?</h4>
                        <p>
                          ì„¸ ì˜ì—­(ê´€ì‹¬, ëŠ¥ë ¥, ê¸°íšŒ)ì—ì„œ <strong>ëª¨ë‘ ìƒìœ„ 3ê°œì— í¬í•¨</strong>ë˜ë©´ì„œ 
                          <strong>ì ìˆ˜ê°€ ë†’ê³  ì¼ì¹˜ë„ê°€ ì¢‹ì€</strong> ì€ì‚¬ì…ë‹ˆë‹¤. ì´ê²ƒì´ í˜„ì¬ ë‹¹ì‹ ì´ 
                          ê°€ì¥ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì€ì‚¬ì…ë‹ˆë‹¤.
                        </p>
                      </div>
                      
                      <div className="bg-white p-4 rounded-lg">
                        <h4 className="font-bold text-lg text-blue-800 mb-2">ğŸ’ª ê°•í•œ ì€ì‚¬ë€?</h4>
                        <p>
                          ìƒìœ„ 3ê°œì—ëŠ” ëª¨ë‘ ë“¤ì§€ ì•Šì•˜ì§€ë§Œ, <strong>í‰ê·  3.5ì  ì´ìƒ</strong>ì´ë©´ì„œ 
                          ì„¸ ì˜ì—­ì˜ <strong>í¸ì°¨ê°€ 1.5ì  ì´í•˜</strong>ì¸ ì€ì‚¬ì…ë‹ˆë‹¤. 
                          ê°œë°œ ê°€ëŠ¥ì„±ì´ ë†’ì€ ì€ì‚¬ì…ë‹ˆë‹¤.
                        </p>
                      </div>

                      <div className="bg-white p-4 rounded-lg">
                        <h4 className="font-bold text-lg text-gray-800 mb-2">ğŸ“Š ì ìˆ˜ í•´ì„ ê°€ì´ë“œ</h4>
                        <ul className="list-disc list-inside space-y-2 ml-2">
                          <li><strong>í‰ê·  4.0 ì´ìƒ:</strong> ë§¤ìš° ê°•í•œ ì€ì‚¬</li>
                          <li><strong>í‰ê·  3.0-4.0:</strong> ê°œë°œ ê°€ëŠ¥í•œ ì€ì‚¬</li>
                          <li><strong>í¸ì°¨ 1.0 ì´í•˜:</strong> ë§¤ìš° ì¼ì¹˜ë„ê°€ ë†’ìŒ</li>
                          <li><strong>í¸ì°¨ 1.0-2.0:</strong> ì¼ì¹˜ë„ ì–‘í˜¸</li>
                        </ul>
                      </div>

                      <div className="bg-white p-4 rounded-lg">
                        <h4 className="font-bold text-lg text-orange-800 mb-2">ğŸŒ± ë¶ˆì¼ì¹˜ ìƒí™© í•´ì„</h4>
                        <ul className="list-disc list-inside space-y-2 ml-2">
                          <li><strong>ê´€ì‹¬ë§Œ ë†’ì€ ê²½ìš°:</strong> ë°°ì›€ê³¼ í›ˆë ¨ì˜ ê¸°íšŒë¡œ ì‚¼ìœ¼ì„¸ìš”</li>
                          <li><strong>ëŠ¥ë ¥ë§Œ ë†’ì€ ê²½ìš°:</strong> ì„¬ê¹€ì˜ ê¸°íšŒë¡œ ì—¬ê¸°ë©° ì˜ì  ë™ê¸°ë¥¼ êµ¬í•˜ì„¸ìš”</li>
                          <li><strong>ê¸°íšŒë§Œ ìˆëŠ” ê²½ìš°:</strong> ìƒˆë¡œìš´ ë„ì „ê³¼ ì„±ì¥ì˜ ê¸°íšŒì…ë‹ˆë‹¤</li>
                        </ul>
                      </div>
                    </div>
                  </div>

                  <button
                    onClick={() => {
                      setCurrentStep('intro');
                      setScores({
                        affinity: Array(10).fill(0),
                        ability: Array(10).fill(0),
                        opportunity: Array(10).fill(0)
                      });
                    }}
                    className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-lg transition"
                  >
                    ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
                  </button>
                </div>
              </div>
            );
          };

          if (currentStep === 'intro') return renderIntro();
          if (currentStep === 'affinity') return renderQuestions('affinity', 'ê´€ì‹¬ (Affinity)', 'ë‹¹ì‹ ì˜ ë§ˆìŒì€ ì–´ë””ì— ëŒë¦¬ë‚˜ìš”?');
          if (currentStep === 'ability') return renderQuestions('ability', 'ëŠ¥ë ¥ (Ability)', 'ë‹¹ì‹ ì˜ ì¬ëŠ¥ì€ ë¬´ì—‡ì¸ê°€ìš”?');
          if (currentStep === 'opportunity') return renderQuestions('opportunity', 'ê¸°íšŒ (Opportunity)', 'ê³µë™ì²´ì˜ í•„ìš”ëŠ” ë¬´ì—‡ì¸ê°€ìš”?');
          if (currentStep === 'result') return renderResults();
        };

        ReactDOM.render(<SpiritualGiftTest />, document.getElementById('root'));
    </script>
</body>
</html>